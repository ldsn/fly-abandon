webpackJsonp([2],{1e3:function(t,e,o){o(645);var i=o(46)(o(647),o(660),null,null);t.exports=i.exports},1001:function(t,e,o){o(661);var i=o(46)(o(663),o(674),null,null);t.exports=i.exports},568:function(t,e,o){o(655);var i=o(46)(o(657),o(658),null,null);t.exports=i.exports},622:function(t,e,o){var i=o(623);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("08621d32",i,!0)},623:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".manage-content{background-color:#f9fafc;padding:20px}",""])},624:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(625),r=o.n(i);e.default={components:{ManageNav:r.a},mounted:function(){this.$store.dispatch("getAllUsers")}}},625:function(t,e,o){o(626);var i=o(46)(o(628),o(629),null,null);t.exports=i.exports},626:function(t,e,o){var i=o(627);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("71d6761c",i,!0)},627:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".manage-nav{width:288px;min-width:288px;background-color:#eef1f6}.manage-nav .el-menu-item-group__title{padding:15px 20px 0;line-height:30px;position:relative}.manage-nav .el-menu-item [class^=el-icon-]{color:#97a8be;margin-left:20px}",""])},628:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},629:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.$route.name,router:!0}},[o("el-menu-item-group",{attrs:{title:"管理设置"}},[o("el-menu-item",{attrs:{index:"ManageApi",route:{name:"ManageApi"}}},[o("i",{staticClass:"el-icon-minus"}),t._v("管理"),o("code",[t._v("配置")])]),t._v(" "),o("el-menu-item",{attrs:{index:"ManageGroup",route:{name:"ManageGroup"}}},[o("i",{staticClass:"el-icon-minus"}),t._v("管理分组\n      ")]),t._v(" "),o("el-menu-item",{attrs:{index:"Profile",route:{name:"Profile"}}},[o("i",{staticClass:"el-icon-minus"}),t._v("个人信息\n      ")])],1)],1)],1)},staticRenderFns:[]}},630:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content",attrs:{id:"manage"}},[o("el-row",{attrs:{type:"flex"}},[o("el-col",{staticClass:"manage-nav",attrs:{span:0}},[o("manage-nav")],1),t._v(" "),o("el-col",{staticClass:"manage-content",attrs:{span:24}},[o("router-view")],1)],1)],1)},staticRenderFns:[]}},631:function(t,e,o){var i=o(632);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("070c5b23",i,!0)},632:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".profile-box{padding:20px}.profile-box .hidden{display:none}",""])},633:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(634),r=o.n(i),a=o(639),s=o.n(a);e.default={components:{UserItem:r.a,Password:s.a},computed:{userItems:function(){return[{label:"姓名",key:"name"},{label:"邮箱",key:"email"}]}}}},634:function(t,e,o){o(635);var i=o(46)(o(637),o(638),null,null);t.exports=i.exports},635:function(t,e,o){var i=o(636);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("036dad6a",i,!0)},636:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".profile-item{padding:10px 0;margin-bottom:15px;border-bottom:1px solid #ebeef5}.profile-item .edit{margin-left:20px;display:none}.profile-item .edit .el-icon-edit{font-size:12px}.profile-item:hover .edit{display:inline-block}.profile-item .el-input{width:200px;margin-right:20px}",""])},637:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(72),r=o.n(i);e.default={props:{item:{type:Object,required:!0}},data:function(){return{mode:"read",tempValue:this.item.value}},computed:{user:function(){return this.$store.state.user}},methods:{validateEmail:function(){return!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.tempValue)||(this.$message.error("邮箱格式错误"),!1)},validate:function(){return this.tempValue?"email"!==this.item.key||this.validateEmail():(this.$message.error(this.item.label+"不能为空"),!1)},handleValueChange:function(t){this.tempValue=t},updateProfile:function(){var t=this;if(this.validate()){var e=r.a.clone(this.user);e[this.item.key]=this.tempValue,this.$store.dispatch("updateProfile",e).then(function(){t.mode="read",t.$message.success("保存成功")})}}}}},638:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form-item",{staticClass:"profile-item",attrs:{label:t.item.label}},["read"===t.mode?[o("span",{staticClass:"value"},[t._v(t._s(t.user[t.item.key]))]),t._v(" "),o("el-button",{staticClass:"edit",attrs:{type:"text",icon:"edit"},on:{click:function(e){t.mode="edit"}}},[t._v("修改")])]:[o("el-input",{attrs:{value:t.user[t.item.key],size:"small"},on:{change:t.handleValueChange}}),t._v(" "),o("span",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.updateProfile}},[t._v("保存")]),t._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(e){t.mode="read"}}},[t._v("取消")])],1)]],2)},staticRenderFns:[]}},639:function(t,e,o){o(640);var i=o(46)(o(642),o(643),null,null);t.exports=i.exports},640:function(t,e,o){var i=o(641);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("7d99ff60",i,!0)},641:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".profile-item.profile-password .el-form-item{margin-bottom:20px}.profile-item.profile-password .el-input{width:100%}",""])},642:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{dialogVisible:!1,passwordRules:{originPassword:[{required:!0,trigger:"blur"}],password:[{validator:this.validateNewPass,required:!0,trigger:"blur"}],verifyPassword:[{validator:this.validateVerifyPass,trigger:"blur"}]},passwordForm:{originPassword:"",password:"",verifyPassword:""}}},methods:{validateNewPass:function(t,e,o){e===this.passwordForm.originPassword?o(new Error("new password cannot equal to old password")):o()},validateVerifyPass:function(t,e,o){""===e?o(new Error("verify password is required")):e!==this.passwordForm.password?o(new Error("verify password don't match")):o()},handleSave:function(){var t=this;this.$refs.passwordForm.validate(function(e){e&&t.updatePassword()})},updatePassword:function(){var t=this;this.$store.dispatch("updatePassword",this.passwordForm).then(function(){t.$message.success("更新成功"),t.dialogVisible=!1}).catch(function(e){return t.$message.error(e.msg)})},handleCancel:function(){this.dialogVisible=!1},handleDialogClose:function(){this.$refs.passwordForm.resetFields()}},computed:{disableSave:function(){var t=this.passwordForm,e=t.originPassword,o=t.password,i=t.verifyPassword;return""===e.trim()||""===o.trim()||""===i.trim()}}}},643:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form-item",{staticClass:"profile-item profile-password",attrs:{label:"密码"}},[o("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("修改密码")]),t._v(" "),o("el-dialog",{staticClass:"update-password",attrs:{title:"修改密码",size:"tiny","show-close":!1},on:{close:t.handleDialogClose},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[o("el-form",{ref:"passwordForm",attrs:{"label-position":"left",model:t.passwordForm,rules:t.passwordRules}},[o("el-form-item",{attrs:{prop:"originPassword"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入原密码"},model:{value:t.passwordForm.originPassword,callback:function(e){t.passwordForm.originPassword=e},expression:"passwordForm.originPassword"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入新密码"},model:{value:t.passwordForm.password,callback:function(e){t.passwordForm.password=e},expression:"passwordForm.password"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"verifyPassword"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请确认新密码"},model:{value:t.passwordForm.verifyPassword,callback:function(e){t.passwordForm.verifyPassword=e},expression:"passwordForm.verifyPassword"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"default"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.disableSave},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]}},644:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"profile-box"},[o("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[t._l(t.userItems,function(t){return o("user-item",{key:t.key,attrs:{item:t}})}),t._v(" "),o("password"),t._v(" "),o("input",{staticClass:"hidden",attrs:{type:"text",name:"为了阻止单个input回车触发submit"}})],2)],1)},staticRenderFns:[]}},645:function(t,e,o){var i=o(646);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("27cbff43",i,!0)},646:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".mode-switch{margin-bottom:20px}.managed .managed,.unmanaged .unmanaged{color:#20a0ff;border-color:#20a0ff}",""])},647:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(73),r=o.n(i),a=o(108),s=o(109),n=o.n(s),l=o(648),u=o.n(l),c=o(653),p=o.n(c),d=o(72),m=o.n(d);e.default={components:{Control:u.a,GroupEdit:p.a},data:function(){return{showGroupEdit:!1,mode:"managed",group:null,groups:[]}},methods:r()({},Object(a.b)(["getManageGroup","getUnmanagedGroup"]),{timeFormat:function(t,e){return n()(new Date(Number(t[e.property]))).format("YYYY-MM-DD HH:mm:ss")},getUnmanaged:function(){var t=this;this.getUnmanagedGroup().then(function(e){t.groups=e.data,t.mode="unmanaged"})},getGroups:function(){var t=this;this.getManageGroup().then(function(e){t.groups=e.data,t.mode="managed"})},groupDelete:function(t){var e=m.a.findIndex(function(e){return e===t})(this.groups);this.groups.splice(e,1)},manageGroup:function(t){window.console.log(t),this.group=t,this.showGroupEdit=!0},updateGroup:function(t){window.console.log(t);var e=m.a.findIndex(m.a.propEq("_id",t._id))(this.groups);this.$set(this.groups,e,t)}}),mounted:function(){this.getGroups()}}},648:function(t,e,o){o(649);var i=o(46)(o(651),o(652),null,null);t.exports=i.exports},649:function(t,e,o){var i=o(650);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("0690daef",i,!0)},650:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,"",""])},651:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{group:{type:Object,required:!0},mode:{type:String,required:!0}},data:function(){return{showAuthority:!1}},methods:{groupClaim:function(){var t=this;this.$store.dispatch("claimGroup",this.group._id).then(function(){t.$message.success("认领成功"),t.$emit("delete",t.group)}).catch(function(e){return t.$message.error(e.msg)})},confirmDelete:function(){var t=this;this.$store.dispatch("deleteGroup",this.group._id).then(function(){t.$message.success("删除成功"),t.$emit("delete",t.group)}).catch(function(e){return t.$message.error(e.msg)})},groupManage:function(){this.$emit("manage",this.group)},groupDelete:function(){var t=this;this.$confirm("分组内Api将一同删除，确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.confirmDelete()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},groupDoc:function(){this.$router.push({name:"GroupDoc",params:{groupId:this.group._id}})}}}},652:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"api-control"},["managed"===t.mode?[o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.groupManage}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.groupDelete}},[t._v("删除")])]:t._e(),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.groupDoc}},[t._v("文档")]),t._v(" "),"unmanaged"===t.mode?o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.groupClaim}},[t._v("认领")]):t._e()],2)},staticRenderFns:[]}},653:function(t,e,o){var i=o(46)(o(654),o(659),null,null);t.exports=i.exports},654:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(568),r=o.n(i),a=o(72),s=o.n(a);e.default={components:{UserSelector:r.a},props:{group:Object,visible:Boolean},data:function(){return{localGroup:s.a.clone(this.group),users:[]}},mounted:function(){this.initUsers()},computed:{allUsers:function(){return this.$store.state.allUsers},title:function(){return""+this.localGroup.name}},methods:{initUsers:function(){var t=this;this.users=this.localGroup.member.map(function(e){return t.allUsers.find(function(t){return t._id===e})})},searchUsers:function(t){this.users=this.allUsers.filter(function(e){return e.email.indexOf(t)>=0||e.name.indexOf(t)>=0})},itemClick:function(t){this.localGroup.member=s.a.symmetricDifference(this.localGroup.member,[t])},itemRemove:function(t){this.localGroup.member=s.a.without([t],this.localGroup.member)},initLocalGroup:function(){this.localGroup=s.a.clone(this.group),this.initUsers()},cancel:function(){this.$emit("hide")},confirm:function(){var t=this;this.$store.dispatch("updateGroup",this.localGroup).then(function(e){t.$message.success("更新成功"),t.$emit("update",e.data),t.$emit("hide")}).catch(function(e){return t.$message.error(e.msg)})}}}},655:function(t,e,o){var i=o(656);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("69af1f38",i,!0)},656:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".user-selector{display:block}",""])},657:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{remoteMethod:Function,placeholder:{type:String,default:"请输入进行搜索选择"},loading:{type:Boolean,default:!1},value:{type:Array,default:[]},options:{type:Array,default:[]}},data:function(){return{localValue:this.value}},methods:{getUserLabel:function(t){return t.name+"（"+t.email+"）"},itemClick:function(t){this.$emit("itemClick",t)},itemRemove:function(t){this.$emit("itemRemove",t.value)}}}},658:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-select",{staticClass:"user-selector",attrs:{value:t.value,multiple:"",filterable:"",remote:"",placeholder:t.placeholder,"remote-method":t.remoteMethod,loading:t.loading},on:{"remove-tag":t.itemRemove}},t._l(t.options,function(e){return o("el-option",{key:e._id,attrs:{label:e.name,value:e._id},nativeOn:{click:function(o){t.itemClick(e._id)}}},[t._v("\n    "+t._s(t.getUserLabel(e))+"\n  ")])}))},staticRenderFns:[]}},659:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.title,visible:t.visible,"show-close":!1},on:{open:t.initLocalGroup}},[o("el-form",{directives:[{name:"stop-default-enter",rawName:"v-stop-default-enter"}],attrs:{"label-position":"right","label-width":"84px"}},[o("el-form-item",{attrs:{label:"群名称："}},[o("el-input",{model:{value:t.localGroup.name,callback:function(e){t.localGroup.name=e},expression:"localGroup.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"隐私性："}},[o("el-radio-group",{model:{value:t.localGroup.privacy,callback:function(e){t.localGroup.privacy=e},expression:"localGroup.privacy"}},[o("el-radio",{attrs:{label:0}},[t._v("所有人可见")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("组内成员可见")]),t._v(" "),o("el-radio",{attrs:{label:3}},[t._v("自己可见")])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"接口操作："}},[o("el-radio-group",{model:{value:t.localGroup.operation,callback:function(e){t.localGroup.operation=e},expression:"localGroup.operation"}},[o("el-radio",{attrs:{label:0}},[t._v("所有人可操作")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("组内成员可操作")])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"组内成员："}},[o("user-selector",{staticClass:"group-member",attrs:{value:t.localGroup.member,remoteMethod:t.searchUsers,options:t.users},on:{itemRemove:t.itemRemove,itemClick:t.itemClick}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},staticRenderFns:[]}},660:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manage-group"},[o("div",{staticClass:"mode-switch",class:t.mode},[o("el-button",{staticClass:"managed",attrs:{size:"small"},nativeOn:{click:function(e){t.getGroups(e)}}},[t._v("我的分组")]),t._v(" "),o("el-button",{staticClass:"unmanaged",attrs:{size:"small"},nativeOn:{click:function(e){t.getUnmanaged(e)}}},[t._v("未认领分组")])],1),t._v(" "),o("div",{staticClass:"group-table"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.groups}},[o("el-table-column",{attrs:{prop:"name",label:"分组名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",formatter:t.timeFormat,width:"200",label:"创建时间"}}),t._v(" "),o("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("control",{attrs:{group:e.row,mode:t.mode},on:{delete:t.groupDelete,manage:t.manageGroup}})]}}])})],1)],1),t._v(" "),t.group?o("group-edit",{attrs:{visible:t.showGroupEdit,group:t.group},on:{update:t.updateGroup,hide:function(e){t.showGroupEdit=!1}}}):t._e()],1)},staticRenderFns:[]}},661:function(t,e,o){var i=o(662);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("01567e54",i,!0)},662:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,"",""])},663:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(73),r=o.n(i),a=o(108),s=o(109),n=o.n(s),l=o(664),u=o.n(l),c=o(669),p=o.n(c);e.default={components:{Control:u.a,ApiAuthority:p.a},data:function(){return{showAuthority:!1,apis:[],api:{}}},computed:{richApis:function(){var t=this;return this.apis.map(function(e){return e.groupName=t.getGroup(e.group),e})},groups:function(){return this.$store.state.groups}},methods:r()({},Object(a.b)(["getManageApi"]),{getGroup:function(t){var e=this.groups.find(function(e){return e._id===t});return e?e.name:"无权查看的分组"},manageApi:function(t){this.api=t,this.showAuthority=!0},timeFormat:function(t,e){return n()(new Date(Number(t[e.property]))).format("YYYY-MM-DD HH:mm:ss")},getApis:function(){var t=this;this.getManageApi().then(function(e){t.apis=e.data})},apiDelete:function(t){var e=this.apis.findIndex(function(e){return e===t});this.apis.splice(e,1)}}),mounted:function(){this.getApis()}}},664:function(t,e,o){o(665);var i=o(46)(o(667),o(668),null,null);t.exports=i.exports},665:function(t,e,o){var i=o(666);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("f00ad054",i,!0)},666:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,"",""])},667:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{api:{type:Object,required:!0}},data:function(){return{showAuthority:!1}},methods:{confirmDelete:function(){var t=this;this.$store.dispatch("deleteApi",{api:this.api}).then(function(){t.$message.success("删除成功"),t.$emit("delete",t.api)}).catch(function(e){return t.$message.error(e.msg)})},apiManage:function(){this.$emit("manage",this.api)},apiDoc:function(){this.$router.push({name:"ApiDoc",params:{groupId:this.api.group,apiId:this.api._id}})},apiEdit:function(){this.$router.push({name:"Edit",params:{groupId:this.api.group,apiId:this.api._id}})},apiDelete:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.confirmDelete()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}}},668:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"api-control"},[o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.apiManage}},[t._v("权限")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.apiEdit}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.apiDoc}},[t._v("文档")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.apiDelete}},[t._v("删除")])],1)},staticRenderFns:[]}},669:function(t,e,o){o(670);var i=o(46)(o(672),o(673),null,null);t.exports=i.exports},670:function(t,e,o){var i=o(671);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(508)("14b247a4",i,!0)},671:function(t,e,o){e=t.exports=o(507)(),e.push([t.i,".api-operator{width:auto;display:block;margin-top:10px}",""])},672:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(568),r=o.n(i),a=o(72),s=o.n(a);e.default={components:{UserSelector:r.a},props:{api:Object,visible:Boolean},data:function(){return{users:[],authority:null}},computed:{allUsers:function(){return this.$store.state.allUsers},title:function(){return""+this.api.name},operator:function(){return this.authority.operation.operator}},methods:{initUsers:function(t){var e=this;this.users=t.map(function(t){return e.allUsers.find(function(e){return e._id===t})})},getApiAuthority:function(){var t=this;this.$store.dispatch("getApiAuthority",this.api._id).then(function(e){t.initUsers(e.data.operation.operator),t.authority=e.data})},searchUsers:function(t){this.users=this.allUsers.filter(function(e){return e.email.indexOf(t)>=0||e.name.indexOf(t)>=0})},updateOperator:function(t){this.authority.operation.operator=t},cancel:function(){this.$emit("hide")},confirm:function(){var t=this;if(2===this.authority.operation.mode&&0===this.operator.length)return void this.$message.error("请至少选择一个人");this.$store.dispatch("updateApiAuthority",this.authority).then(function(e){t.$message.success(e.data),t.$emit("hide")}).catch(function(e){return t.$message.error(e.msg)})},itemClick:function(t){this.authority.operation.operator=s.a.symmetricDifference(this.authority.operation.operator,[t])},itemRemove:function(t){this.authority.operation.operator=s.a.without([t],this.authority.operation.operator)}}}},673:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.title,visible:t.visible,"show-close":!1},on:{open:t.getApiAuthority}},[t.authority?o("el-form",{directives:[{name:"stop-default-enter",rawName:"v-stop-default-enter"}],attrs:{"label-position":"left","label-width":"84px"}},[o("el-form-item",{attrs:{label:"编辑权限："}},[o("el-radio-group",{model:{value:t.authority.operation.mode,callback:function(e){t.authority.operation.mode=e},expression:"authority.operation.mode"}},[o("el-radio",{attrs:{label:0}},[t._v("所有人")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("组内人员")]),t._v(" "),o("el-radio",{attrs:{label:2}},[t._v("指定人员")])],1),t._v(" "),o("user-selector",{directives:[{name:"show",rawName:"v-show",value:2===t.authority.operation.mode,expression:"authority.operation.mode === 2"}],staticClass:"api-operator",attrs:{value:t.operator,remoteMethod:t.searchUsers,options:t.users},on:{itemRemove:t.itemRemove,itemClick:t.itemClick}})],1)],1):t._e(),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},staticRenderFns:[]}},674:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"manage-api"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.richApis}},[o("el-table-column",{attrs:{prop:"options.method",label:"方法",width:"70"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"接口名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"groupName",label:"所属分组"}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",formatter:t.timeFormat,width:"200",label:"创建时间"}}),t._v(" "),o("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("control",{attrs:{api:e.row},on:{delete:t.apiDelete,manage:t.manageApi}})]}}])})],1),t._v(" "),o("api-authority",{attrs:{api:t.api,visible:t.showAuthority},on:{hide:function(e){t.showAuthority=!1}}})],1)},staticRenderFns:[]}},998:function(t,e,o){o(622);var i=o(46)(o(624),o(630),null,null);t.exports=i.exports},999:function(t,e,o){o(631);var i=o(46)(o(633),o(644),null,null);t.exports=i.exports}});